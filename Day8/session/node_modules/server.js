const express=require('express')

const app=express()

app.use(express.json())


app.get('/login',(req,res)=>{
   res.send('hello')
})
 let data={
    'reem':{
        'username':"omar",
        'password':'1234'
    }
 }
app.post('/login',(req,res)=>{
   let username=req.body.username;
   let password=req.body.password;
    if(!username || !password)
    {
        return res.send("username and password are required")
    }

    if(username==='reem' && password==='1234')
    {
        return res.send("login successfully")
    }else
    {
        return res.send("invailed username or password")
    }
})

app.post('/register',(req,res)=>{
    let username=req.body.username
    let password=req.body.password
    let email=req.body.email
    let phone=req.body.phone

    if(data[username])
    {
        return res.send("the user is already exit !!")
    }
    if(!username || !phone || !password || !email)
    {
        return res.send("there is something miss")
    }
    if(password.length<8)
    {
        return res.send("the password must be more than 8 letters")
    }
    if(!email.includes('@'))
    {
        return res.send("invailed email")
    }
    return res.send("user register successfully!!")
})
app.post('/logout',(req,res)=>{
    let username=req.body.username
    let password=req.body.password
    if(!data[username])
    {
        return res.send("the user is not found")
    }
    delete data[username]
    return res.send('user logout seccessfuly!!')
})      




app.get('/profile',(req,res)=>{
    // let profile=req.query.username;
    // if(!profile) return res.status(404).send("username is required!!")
    // return res.send(profile)
    // return res.send(req.query)
    
    return res.json(req.query)
})


app.listen(3000,()=>console.log("server is running"))